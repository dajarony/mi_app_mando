version: "1.0"
info:
  name: "Backend SUMETV"
  description: "Arquitectura del backend para el control de Smart TVs y observabilidad."
  last_updated: "2025-07-03"

architecture:
  layers:
    - name: "Entradas"
      description: "Capa de interfaz con el exterior. Maneja peticiones HTTP y eventos externos."
      components:
        - name: "API Principal (api_app.py)"
          description: "Punto de entrada principal de la API. Contiene endpoints de observabilidad y carga middlewares."
          files: ["core2/core_dajarony/entradas/api_app.py"]
        - name: "AuthMiddleware (auth_middleware.py)"
          description: "Middleware para autenticación y control de acceso."
          files: ["sumetv/entradas/middlewares/auth_middleware.py"]
        - name: "TV Router (tv_router.py)"
          description: "Define y enruta los endpoints relacionados con el control de TV."
          files: ["sumetv/entradas/routers/tv_router.py"]
        - name: "DLNA Discovery (dlna_discovery.py)"
          description: "Módulo para el descubrimiento de dispositivos DLNA en la red."
          files: ["sumetv/entradas/descubrimiento/dlna_discovery.py"]
        - name: "Android Discovery (android_discovery.py)"
          description: "Módulo para el descubrimiento de dispositivos Android en la red."
          files: ["sumetv/entradas/descubrimiento/android_discovery.py"]
        - name: "Config Watcher (config_watcher.py)"
          description: "Módulo para la recarga de configuración en caliente."
          files: ["core2/core_dajarony/entradas/config_watcher.py"]

    - name: "Lógica"
      description: "Capa de lógica de negocio. Contiene controladores, servicios y modelos."
      components:
        - name: "TV Controller (tv_controller.py)"
          description: "Orquesta las operaciones de control de TV."
          files: ["sumetv/logica/controladores/tv_controller.py"]
        - name: "Philips Controller (philips_controller.py)"
          description: "Controlador específico para TVs Philips."
          files: ["sumetv/logica/controladores/philips_controller.py"]
        - name: "Mobile App Launcher (mobile_app_launcher.py)"
          description: "Lanzador de aplicaciones móviles (simulado/placeholder)."
          files: ["sumetv/logica/lanzadores/mobile_app_launcher.py"]
        - name: "Protocolos (protocolos.py)"
          description: "Servicios relacionados con protocolos de comunicación (ej. DLNA)."
          files: ["sumetv/logica/servicios/protocolos.py"]
        - name: "Ping Service (ping.py)"
          description: "Servicio para verificar la disponibilidad de dispositivos mediante ping."
          files: ["sumetv/logica/servicios/ping.py"]
        - name: "Android Control (android_control.py)"
          description: "Servicio para enviar comandos ADB a dispositivos Android."
          files: ["sumetv/logica/servicios/android_control.py"]
        - name: "TV Device Model (tv_device.py)"
          description: "Modelo de datos para representar dispositivos TV."
          files: ["sumetv/logica/Modelos/tv_device.py"]
        - name: "Almacén de Dispositivos (almacen_dispositivos.py)"
          description: "Gestiona la caché local y la sincronización con Firebase."
          files: ["sumetv/logica/Almacen/almacen_dispositivos.py"]

    - name: "Salidas"
      description: "Capa de interacción con servicios externos de persistencia o notificación."
      components:
        - name: "Firebase Store (firebase_store.py)"
          description: "Gestiona la persistencia de datos en Firebase Firestore."
          files: ["sumetv/salidas/firebase_store.py"]

    - name: "Infraestructura"
      description: "Servicios de bajo nivel y configuración global."
      components:
        - name: "Logging Configuration (logging_config.py)"
          description: "Módulo para la configuración centralizada del sistema de logging."
          files: ["core2/core_dajarony/infraestructura/logging_config.py"]

